

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Saxsdog Network &mdash; SAXS 1.0.1 alpha documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="SAXS 1.0.1 alpha documentation" href="index.html"/>
        <link rel="next" title="The Saxsdog Server" href="SAXSProtocol.html"/>
        <link rel="prev" title="Statistics" href="Statistics.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> SAXS</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="TheTools.html">The Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TheTools.html#the-saxsdog">The Saxsdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="TheTools.html#the-converter">The Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="TheTools.html#plotchi">Plotchi</a></li>
<li class="toctree-l2"><a class="reference internal" href="TheTools.html#saxsdmerge">Saxsdmerge</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSSchemaDoc.html">The Calibration File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSSchemaDoc.html#calibration-file-reference">Calibration file Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TheTechnology.html">The Technology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="MatrixMulti.html">Integration as Matrix-Vector Multiplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="MatrixMulti.html#over-sampling">Over sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="Geometry.html">The Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="PolCorr.html">Polarization Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Fit2d.html">Compare With Fit2d</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConstantImage.html">Integrating a Constant Image With Masked Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="Statistics.html">Statistics</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">The Saxsdog Network</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-saxsnetwork-configuration">The SAXSNetwork configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-saxsdog-server">The Saxsdog Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-saxs-leash">The Saxs Leash</a></li>
<li class="toctree-l2"><a class="reference internal" href="#saxs-leash-commandline">Saxs Leash Commandline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-saxsdog-network-protocol">The Saxsdog Network Protocol</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSapi.html">SAXS Module API</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">SAXS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>The Saxsdog Network</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/Server.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="the-saxsdog-network">
<h1>The Saxsdog Network<a class="headerlink" href="#the-saxsdog-network" title="Permalink to this headline">¶</a></h1>
<p>The network may consist of 3 different services. The &#8220;Saxsdog Server&#8221; does the image processing.
The &#8220;Saxs Feeder&#8221; publishes new file Events and the &#8220;Saxs Leash&#8221; controls an configures the server.</p>
<div class="figure">
<img src="_images/Network.svg" /></div>
<div class="section" id="the-saxsnetwork-configuration">
<h2>The SAXSNetwork configuration<a class="headerlink" href="#the-saxsnetwork-configuration" title="Permalink to this headline">¶</a></h2>
<p>The Saxsdog Server and the Saxsleash have a common configuration file, which tells them how to connect
with each other and which also includes a shared secret for authentication.
If you want two computers to connect via the Saxsleash you need to have a copy of the file on each of them.</p>
<p>To create such a configuration, use the command:</p>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsnetconf
</pre></div>
</div>
<p>It will ask for the Feeder
URL and for the Saxsdog Server URL. Then it will generate a random secret and save the file in
file in <tt class="docutils literal"><span class="pre">$Home/.saxdognetwork</span></tt>.  You will have to copy the file
to the other computers you need to allow to connect to your network. The secret must be the same on all of them.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="p">{</span>
   <span class="s">&quot;Server&quot;</span><span class="p">:</span><span class="s">&quot;tcp://hostname:port&quot;</span><span class="p">,</span>
   <span class="s">&quot;Feeder&quot;</span><span class="p">:</span><span class="s">&quot;tcp://hostname:port&quot;</span><span class="p">,</span>
   <span class="s">&quot;Secret&quot;</span><span class="p">:</span><span class="s">&quot;Some large random string.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The authentication is done by hashing the request and the secret including a time stamp.
The time stamp is checked if it lies within 900 seconds of the servers time.</p>
</div>
<div class="section" id="the-saxsdog-server">
<h2>The Saxsdog Server<a class="headerlink" href="#the-saxsdog-server" title="Permalink to this headline">¶</a></h2>
<p>The Saxdog Server is the program that is started on the processing computer (node).
It may subscribe to a &#8220;new file&#8221; event service.</p>
<div class="highlight-text"><div class="highlight"><pre>$ saxsdogserver --help
Usage: saxsdogserver [options] basedir

Options:
  -h, --help            show this help message and exit
  -p port, --port=port  Port to offer command service. Default is 7777.
  -t THREADS, --threads=THREADS
                        Number of concurrent processes.
  -f tcp://hostname:port, --feeder=tcp://hostname:port
                        Specify the URL of the new file event service (Saxsdog
                        Feeder)
  -w, --watch           Watch directory for changes, using file system events
                        recursively for all sub directories.
  -o OUTDIR, --out=OUTDIR
                        Specify output directory. Default is &#39;./out&#39;.
  -i, --inplace         Files are written, in place, in the directory of the
                        image.
</pre></div>
</div>
</div>
<div class="section" id="the-saxs-leash">
<h2>The Saxs Leash<a class="headerlink" href="#the-saxs-leash" title="Permalink to this headline">¶</a></h2>
<img alt="_images/screenshot.png" src="_images/screenshot.png" />
<p>The Leash Program is a GUI to load calibrations into the Saxdog Server and monitor the processing of the data.
It provides a calibration editor, as mask preview and basic data import from <em class="xref std std-ref">saxsconverter</em>.</p>
<p>The main window has 3 tab cards. The first is for setting up the server,
the second to review the currently processed data and the third for basic statistics. The command to launch it is.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="n">leash</span>
</pre></div>
</div>
</div>
<div class="section" id="saxs-leash-commandline">
<h2>Saxs Leash Commandline<a class="headerlink" href="#saxs-leash-commandline" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;Saxs Leash&#8221; client can issue the commands for the Saxsdog Server.</p>
<div class="highlight-text"><div class="highlight"><pre>$ saxsleash --help
Usage: saxsleash close|abort|new|get|plot|plotdata|readdir|stat [options] [arguments]

Options:
  -h, --help            show this help message and exit
  -S tcp://HOSTNAME:PORT, --server=tcp://HOSTNAME:PORT
                        URL of &quot;Saxsdog Server&quot;
  -s N, --skip=N        plot: Skip first N points.
  -k N, --clip=N        plot: Clip last N points.
  -x TYPE, --xaxsistype=TYPE
                        plot: Select type of X axis scale, might be
                        [linear|log|symlog]
  -y TYPE, --yaxsistype=TYPE
                        plot: Select type of Y axis scale, might be
                        [linear|log|symlog]
</pre></div>
</div>
<p>Most of the command line options are about the <tt class="docutils literal"><span class="pre">plot</span></tt> command, but in order to visualize
the processed data, one has to send the commands to setup a calibration.</p>
<div class="section" id="new">
<h3>New<a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash new cal.json data/AAA_integ.msk data/
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">new</span></tt> command loads a calibration and starts the queue to receive new files. It requires 3 arguments:</p>
<ol class="arabic simple">
<li>Calibration file. as in <a class="reference internal" href="SAXSSchemaDoc.html#calib"><em>The Calibration File</em></a>,</li>
<li>mask file,</li>
<li>directory where the image files are or are going to be.</li>
</ol>
<dl class="docutils">
<dt>If there is a queue running, this command will abort the other one and replace it.</dt>
<dd>One server can have only one queue at a time.</dd>
</dl>
</div>
<div class="section" id="plot">
<h3>Plot<a class="headerlink" href="#plot" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash plot
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">plot</span></tt> command will grab the next image and show a plot of the result in a window.
This command will be repeated until the user interrupts it with <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt>.</p>
</div>
<div class="section" id="close">
<h3>Close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash close
</pre></div>
</div>
<p>Closes the queue. Which means, the server will process what is left in the queue but ignore all new files.</p>
</div>
<div class="section" id="abort">
<h3>Abort<a class="headerlink" href="#abort" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash abort
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">abort</span></tt> command will close the queue  and stop all data processing processes.
It will only wait for each process to finish the picture they started before.
The remaining pictures in the queue are ignored.</p>
</div>
<div class="section" id="stat">
<h3>Stat<a class="headerlink" href="#stat" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash stat
</pre></div>
</div>
<p>Return basic statistics data about the processes.</p>
</div>
<div class="section" id="read-dir">
<h3>Read Dir<a class="headerlink" href="#read-dir" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre>$ saxsleash readdir
</pre></div>
</div>
<p>This command will put all the images in the configured directory into the queue.
This is useful to reprocess pictures.</p>
</div>
</div>
<div class="section" id="the-saxsdog-network-protocol">
<h2>The Saxsdog Network Protocol<a class="headerlink" href="#the-saxsdog-network-protocol" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html">The Saxsdog Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#the-saxsdog-feeder">The Saxsdog Feeder</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#the-saxsdog-leash">The Saxsdog Leash</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#close">Close</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#abort">Abort</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#plot">Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#readdir">Readdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#stat">Stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#error">Error</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#request-schema">Request Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#command">command</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#argument">argument</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#directory">directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#calibration">calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#sign">sign</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#time">time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#response-schema">Response Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#result">result</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#data">data</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#cal">cal</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#id11">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#id13">directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#id15">stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#queue-length">queue length</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#images-processed">images processed</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#time-interval">time interval</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#frames-per-sec">frames per sec</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#pics">pics</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#filename">filename</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#array">array</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SAXSProtocol.html" class="btn btn-neutral float-right" title="The Saxsdog Server"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Statistics.html" class="btn btn-neutral" title="Statistics"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright  2014, Tu Graz, Christian Meisenbichler, Heinz Amenitsch.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.1 alpha',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>