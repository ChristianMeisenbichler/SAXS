<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Saxsdog Network &mdash; SAXS 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="SAXS 0.3.0 documentation" href="index.html" />
    <link rel="next" title="The Saxsdog Server" href="SAXSProtocol.html" />
    <link rel="prev" title="Statistics" href="Statistics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="SAXSProtocol.html" title="The Saxsdog Server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Statistics.html" title="Statistics"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">SAXS 0.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="the-saxsdog-network">
<h1>The Saxsdog Network<a class="headerlink" href="#the-saxsdog-network" title="Permalink to this headline">¶</a></h1>
<p>The network may consist of 3 different services. The &#8220;Saxsdog Server&#8221; does the image processing.
The &#8220;Saxs Feeder&#8221; puplishes new file Events and the &#8220;Saxs Leash&#8221; controlls an configures the server.</p>
<div class="figure">
<img src="_images/Network.svg" /></div>
<div class="section" id="the-saxsnetwork-configuration">
<h2>The SAXSNetwork configuration<a class="headerlink" href="#the-saxsnetwork-configuration" title="Permalink to this headline">¶</a></h2>
<p>The Saxsdog Server and the Saxsleash have a common configuration file, which tells them how to connect
with each other and which also includes a shared secred for authentication.
If you want two computers to connect via the Saxsleash you need to have a copy of the file on each of them.</p>
<p>To create such a configuration, use the command:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsnetconf</span>
</pre></div>
</div>
<p>It will ask for the Feeder
URL and for the Saxsdog Server URL. Then it will generate a random secret and save the file in
file in <tt class="docutils literal"><span class="pre">$Home/.saxdognetwork</span></tt>.  You will have to copy the file
to the other computers you need to allow to conect to your network. The secret must be the same on all of them.</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="p">{</span>
   <span class="s">&quot;ServerUrl&quot;</span><span class="p">:</span><span class="s">&quot;tcp://hostname:port&quot;</span><span class="p">,</span>
   <span class="s">&quot;FeederUrl&quot;</span><span class="p">:</span><span class="s">&quot;tcp://hostname:port&quot;</span><span class="p">,</span>
   <span class="s">&quot;Secret&quot;</span><span class="p">:</span><span class="s">&quot;kljjkb4b3kjbk4bkjdbkjsdni8893nslsdf8d7f89diweh&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The authentication is done by hashing the request and the secret including a timestamp.
The timestamp is checked if it lies within 900 seconds of the servers time.</p>
</div>
<div class="section" id="the-saxsdog-server">
<h2>The Saxsdog Server<a class="headerlink" href="#the-saxsdog-server" title="Permalink to this headline">¶</a></h2>
<p>The Saxdog Server is the program that is started on the processing computer (node).
It may subscribe to a &#8220;new file&#8221; event service.</p>
<div class="highlight-text"><div class="highlight"><pre>$ saxsdogserver --help
Usage: saxsdogserver [options]

Options:
  -h, --help            show this help message and exit
  -p port, --port=port  Port to offer command service. Default is 7777.
  -t THREADS, --threads=THREADS
                        Number of concurrent processes.
  -f tcp://hostname:port, --feeder=tcp://hostname:port
                        Specify the URL of the new file event service (Saxsdog
                        Feeder)
  -w, --watch           Watch directory for changes, using file system events
                        recursively for all sub directories.
</pre></div>
</div>
</div>
<div class="section" id="the-saxs-leash">
<h2>The Saxs Leash<a class="headerlink" href="#the-saxs-leash" title="Permalink to this headline">¶</a></h2>
<p>The &#8220;Saxs Leash&#8221; client can issue the commands for the Saxsdog Server. It has a commandline interface only, for now.</p>
<div class="highlight-text"><div class="highlight"><pre>$ saxsleash --help
Usage: saxsleash close|abort|new|plot|readdir|stat [options] [arguments]

Options:
  -h, --help            show this help message and exit
  -S tcp://HOSTNAME:PORT, --server=tcp://HOSTNAME:PORT
                        URL of &quot;Saxsdog Server&quot;
  -s N, --skip=N        plot: Skip first N points.
  -k N, --clip=N        plot: Clip last N points.
  -x TYPE, --xaxsistype=TYPE
                        plot: Select type of X axis scale, might be
                        [linear|log|symlog]
  -y TYPE, --yaxsistype=TYPE
                        plot: Select type of Y axis scale, might be
                        [linear|log|symlog]
</pre></div>
</div>
<p>Most of the commandline options are apout the <tt class="docutils literal"><span class="pre">plot</span></tt> command, but in order to visualize
the processed data, one has to send the commands to setup a calibration.</p>
<div class="section" id="new">
<h3>New<a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash new cal.json data/AAA_integ.msk data/</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">new</span></tt> command loads a calibration and starts the queue to receive new files. It requires 3 arguments:</p>
<ol class="arabic simple">
<li>Calibration file. as in <a class="reference internal" href="SAXSSchemaDoc.html#calib"><em>The Calibration File</em></a>,</li>
<li>mask file,</li>
<li>directory where the image files are or are going to be.</li>
</ol>
<dl class="docutils">
<dt>If there is a queue running, this command will abort the other one and replace it.</dt>
<dd>One server can have only one queue at a time.</dd>
</dl>
</div>
<div class="section" id="plot">
<h3>Plot<a class="headerlink" href="#plot" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash plot</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">plot</span></tt> command will grab the next image and show a plot of the result in a window.
This command will be repeated until the user interrupts it with <tt class="docutils literal"><span class="pre">Ctrl-C</span></tt>.</p>
</div>
<div class="section" id="close">
<h3>Close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash close</span>
</pre></div>
</div>
<p>Closes the queue. Which means, the server will process what is left in the queue but ignore all new files.</p>
</div>
<div class="section" id="abort">
<h3>Abort<a class="headerlink" href="#abort" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash abort</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">abort</span></tt> command will close the queue  and stop all data processing processes.
It will only wait for each process to finish the picture they started before.
The remaining pictures in the queue are ignored.</p>
</div>
<div class="section" id="stat">
<h3>Stat<a class="headerlink" href="#stat" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash stat</span>
</pre></div>
</div>
<p>Return basic statistics data about the processes.</p>
</div>
<div class="section" id="read-dir">
<h3>Read Dir<a class="headerlink" href="#read-dir" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-python"><div class="highlight"><pre><span class="c"># saxsleash readdir</span>
</pre></div>
</div>
<p>This command will put all the images in the configured directory into the queue.
This is usefull to reprocess pictures.</p>
</div>
</div>
<div class="section" id="the-saxsdog-network-protocol">
<h2>The Saxsdog Network Protocol<a class="headerlink" href="#the-saxsdog-network-protocol" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html">The Saxsdog Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#the-saxsdog-feeder">The Saxsdog Feeder</a></li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#the-saxsdog-leash">The Saxsdog Leash</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#close">Close</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#abort">Abort</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#new">New</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#plot">Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#readdir">Readdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#stat">Stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#error">Error</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#request-schema">Request Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#command">command</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#argument">argument</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#directory">directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#calibration">calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#sign">sign</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#time">time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SAXSProtocol.html#response-schema">Response Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#result">result</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#data">data</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#cal">cal</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#id11">Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#id13">stat</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#queue-length">queue length</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#images-processed">images processed</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#time-interval">time interval</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#frames-per-sec">frames per sec</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#pics">pics</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#filename">filename</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAXSProtocol.html#array">array</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Saxsdog Network</a><ul>
<li><a class="reference internal" href="#the-saxsnetwork-configuration">The SAXSNetwork configuration</a></li>
<li><a class="reference internal" href="#the-saxsdog-server">The Saxsdog Server</a></li>
<li><a class="reference internal" href="#the-saxs-leash">The Saxs Leash</a><ul>
<li><a class="reference internal" href="#new">New</a></li>
<li><a class="reference internal" href="#plot">Plot</a></li>
<li><a class="reference internal" href="#close">Close</a></li>
<li><a class="reference internal" href="#abort">Abort</a></li>
<li><a class="reference internal" href="#stat">Stat</a></li>
<li><a class="reference internal" href="#read-dir">Read Dir</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-saxsdog-network-protocol">The Saxsdog Network Protocol</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Statistics.html"
                        title="previous chapter">Statistics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SAXSProtocol.html"
                        title="next chapter">The Saxsdog Server</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Server.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="SAXSProtocol.html" title="The Saxsdog Server"
             >next</a> |</li>
        <li class="right" >
          <a href="Statistics.html" title="Statistics"
             >previous</a> |</li>
        <li><a href="index.html">SAXS 0.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Christian Meisenbichler.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>